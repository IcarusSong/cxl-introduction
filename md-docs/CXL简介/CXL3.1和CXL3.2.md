
# CXL3.1 和CXL3.2
CXL 3.1和CXL 3.2在CXL 3.0的基础上进一步扩展了功能，主要新增特性如下：

## **CXL 3.1 新增特性**
1. **更大规模的Fabric架构支持**
   - **端口路由（Port-based Routing）**：通过基于端口的路由机制，支持更复杂的网络拓扑，提升可扩展性。
   - **Fabric附加设备**：允许设备直接连接到Fabric网络，突破传统单层交换架构限制，适用于“机架规模”（Rack Scale）场景。

2. **增强的点对点通信（P2P）**
   - 支持通过**CXL.mem协议**实现设备间的直接内存访问，减少主机干预，提升通信效率。

3. **可信安全协议（TSP）扩展**
   - **覆盖加速器设备**：TSP从仅支持内存设备扩展到加速器设备，提供端到端加密和可信执行环境（TEE），保障敏感工作负载的安全。

4. **管理功能增强**
   - **Fabric管理API**：标准化接口，简化对交换机和设备的集中管理，支持动态资源分配。


## **CXL 3.2 新增特性**
1. **热页监控单元（CHMU）**
   - **硬件级内存分层优化**：通过CXL内存设备内置的CHMU，实时跟踪“热页”（频繁访问的内存页），减少软件开销。
   - **灵活配置**：支持多粒度（如256MB地址范围）监控，阈值和周期可配置，提升内存利用率。
   - **标准化接口**：通过“热列表”（Hotlist）向软件报告热页，避免厂商绑定。

2. **可靠性、可用性与可维护性（RAS）增强**
   - **硬件级修复（hPPR）**：支持硬件自动修复内存设备的物理损坏（Post Package Repair），减少停机时间。
   - **事件记录优化**：新增事件记录字段（如Head ID/LD ID），实现更精准的错误定位和隔离。

3. **性能监控与元数据管理**
   - **性能计数器**：提供CXL内存设备的访问统计，帮助优化应用性能。
   - **元数据存储**：允许主机管理HDM-H地址区域的元数据（如ECC、安全标签），动态调整DRAM使用。

4. **安全与兼容性改进**
   - **IDE扩展**：对延迟毒药消息（Late Poison Messages）提供完整性与加密保护。
   - **PCIe MMPT兼容**：支持PCIe管理消息透传，统一CXL/PCIe设备的管理框架。

5. **合规性测试**
   - 新增TSP合规性测试，确保不同厂商设备的互操作性。

### **总结**
- **CXL 3.1**：聚焦**大规模Fabric扩展**和**安全增强**，支持复杂拓扑和加速器安全。
- **CXL 3.2**：优化**内存管理效率**（CHMU）、**可靠性**（hPPR）及**运维能力**（性能监控、元数据），并强化与PCIe生态的兼容性。

这些特性进一步巩固了CXL在异构计算、内存池化和AI工作负载中的核心地位。
